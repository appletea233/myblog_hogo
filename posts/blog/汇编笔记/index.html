<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=robots content="index, follow"><title>MIPS汇编基础 | Appletea's Blog</title><meta name=keywords content="mips,汇编语言"><meta name=description content="基础知识 寄存器 基础操作 系统调用 GCD最大公约数 主要考察循环，使用$j$指令进行代码块间的跳转 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24"><meta name=author content="
作者:&nbsp;appletea"><link rel=canonical href=http://appletea233.github.io/myblog_hogo/posts/blog/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/><link crossorigin=anonymous href=/myblog_hogo/assets/css/stylesheet.min.dafbad219c160a2cdb650c1eb791a4a2416f32636655e6cfe0792b9e36128edc.css integrity="sha256-2vutIZwWCizbZQwet5GkokFvMmNmVebP4HkrnjYSjtw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/myblog_hogo/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://appletea233.github.io/myblog_hogo/img/Q.jpg><link rel=icon type=image/png sizes=16x16 href=http://appletea233.github.io/myblog_hogo/img/Q.jpg><link rel=icon type=image/png sizes=32x32 href=http://appletea233.github.io/myblog_hogo/img/Q.jpg><link rel=apple-touch-icon href=http://appletea233.github.io/myblog_hogo/Q.jpg><link rel=mask-icon href=http://appletea233.github.io/myblog_hogo/Q.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="MIPS汇编基础"><meta property="og:description" content="基础知识 寄存器 基础操作 系统调用 GCD最大公约数 主要考察循环，使用$j$指令进行代码块间的跳转 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24"><meta property="og:type" content="article"><meta property="og:url" content="http://appletea233.github.io/myblog_hogo/posts/blog/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/"><meta property="og:image" content="http://appletea233.github.io/myblog_hogo/posts/blog/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0.assets/image-20211105005052389.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-07T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-08T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://appletea233.github.io/myblog_hogo/posts/blog/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0.assets/image-20211105005052389.png"><meta name=twitter:title content="MIPS汇编基础"><meta name=twitter:description content="基础知识 寄存器 基础操作 系统调用 GCD最大公约数 主要考察循环，使用$j$指令进行代码块间的跳转 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"📚文章","item":"http://appletea233.github.io/myblog_hogo/posts/"},{"@type":"ListItem","position":3,"name":"Blog","item":"http://appletea233.github.io/myblog_hogo/posts/blog/"},{"@type":"ListItem","position":4,"name":"MIPS汇编基础","item":"http://appletea233.github.io/myblog_hogo/posts/blog/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MIPS汇编基础","name":"MIPS汇编基础","description":"基础知识 寄存器 基础操作 系统调用 GCD最大公约数 主要考察循环，使用$j$指令进行代码块间的跳转 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","keywords":["mips","汇编语言"],"articleBody":"基础知识 寄存器 基础操作 系统调用 GCD最大公约数  主要考察循环，使用$j$指令进行代码块间的跳转  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  .data .text # 读入数据 li $v0 5 syscall addi $t0, $v0, 0 li $v0 5 syscall addi $t1, $v0, 0 # 循环求公约数 while: beqz $t1, next div $t0, $t1 move $t0, $t1 mfhi $s0 addi $t1, $s0, 0 j while next: addi $a0, $t0, 0 li $v0, 1 syscall li $v0, 10 syscall   约瑟夫问题 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44  .data v: .word 1:110 .text main: li $v0, 5 syscall move $s0, $v0 # 存储n li $v0, 5 syscall move $s1, $v0 # 存储m li $v0, 5 syscall move $s2, $v0 # 存储k addi $t0, $s0, 0 # 当前人数alive addi $t1, $s2, 0 # 当前轮到的人index move $t2, $0 #当前轮次轮到过的人数num while1: beq $t0, 0, out1 mul $t3, $t1, 4 lw $t4, v($t3) add $t2, $t2, $t4 bne $t2, $s1, L sw $0, v($t3) addi $t0, $t0, -1 move $t2, $0 addi $a0, $t1, 1 li $v0, 1 syscall L: addi $t1, $t1, 1 bne $t1, $s0, L2 move $t1, $0 L2: j while1 out1: li $v0, 10 syscall   斐波那契数列 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  li $v0, 5 syscall move $s0, $v0 li $s1, 1 li $s2, 1 beq $s0, 1, one_or_two beq $s0, 2, one_or_two li $t0, 2 for: bgt $t0, $s0, break1 add $s2, $s2, $s1 sub $s1, $s2, $s1 addi $t0, $t0, 1 j for one_or_two: li $a0, 1 li $v0, 1 syscall li $v0, 10 syscall break1: move $a0, $s1 li $v0, 1 syscall li $v0, 10 syscall   数组 1 2 3  .data Myarray: .space 12 .text     .space就是在内存中开辟了一个相应大小的空间。就如示例中400就对应能存100个字（1个字四个字节，一个字节8位。内存是一个字一个字存储）\n  .word就是声明一个 word 类型的变量 name, 同时给其赋值为value\n  .byte并不是按字去申请空间，而是按照字节\n  .asciiz就是定义相应的字符串，便于后续的输出\n   .asciiz与.ascii的区别  .ascii 声明使用 ASCII 字符声明一个文本字符串。字符串元素被预定义并且存放在内存中，其起始内存位置有便签 output指示。 .ascii和.asciz的区别是，.asciz会在字符串后自动添加结束符\\0.    字符串部分逆置  考察字符串的输入输出  注意字符串在输入的时候有两个参数，第一个$ $a_0$存储字符串的首地址，第二个$$a_1$存储字符串的长度$+1$（因为字符串末尾需要有一个$NULL(’\\setminus0’)$）   考察对字符的操作，存取分别用$sb、lb$  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60  .data mystring: .space 1010 .text # 读入零散数据 li $v0, 5 syscall move $t0, $v0 #读入n li $v0, 5 syscall move $t1, $v0 #读入x li $v0, 5 syscall move $t2, $v0 #读入y # 读入字符串 li $v0, 8 la $a0, mystring addi $a1, $t0, 1 syscall # 输出x前的字符串 li $t3, 0 loop1: bge $t3, $t1, done1 li $v0, 11 lb $a0, mystring($t3) syscall addi $t3, $t3, 1 j loop1 done1: # 反转输出x~y的字符串 addi $t3, $t2, 0 loop2: blt $t3, $t1, done2 li $v0, 11 lb $a0, mystring($t3) syscall addi $t3, $t3, -1 j loop2 done2: # 输出y后的字符串 addi $t3, $t2, 1 loop3: bge $t3, $t0, done3 li $v0, 11 lb $a0, mystring($t3) syscall addi $t3, $t3, 1 j loop3 done3: li $v0, 10 syscall   冒泡排序 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75  .data array: .word 0:101 .text main: # 读入数据 li $v0, 5 syscall move $s0, $v0 # 循环读入数组 li $t0, 0 for1: bge $t0, $s0, break1 mul $t1, $t0, 4 li $v0, 5 syscall sw $v0, array($t1) addi $t0, $t0, 1 j for1 break1: # 排序 li $t0, 0 #i指针 for2: bge $t0, $s0, break2 li $t1, 0 #j指针 addi $t2, $s0, -1 sub $t2, $t2, $t0 for3: bge $t1, $t2, break3 # j与j+1的地址 mul $t4, $t1, 4 addi $t5, $t4, 4 lw $s4, array($t4) lw $s5, array($t5) ble $s4, $s5, L sw $s5, array($t4) sw $s4, array($t5) L: addi $t1, $t1, 1 j for3 break3: addi $t0, $t0, 1 j for2 break2: li $t0, 0 for4: bge $t0, $s0, break4 mul $t1, $t0, 4 lw $a0, array($t1) li $v0, 1 syscall addi $t0, $t0, 1 j for4 break4: li $v0, 10 syscall    数组的应用 函数的调用以及地址返回 在mips中使用递归函数（用栈指针模拟$sp）  递归函数 递归的基本例 有关指令 1  jal function #set $ra to Program Counter(PC),then jump to statement at target addres   C语言代码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  #include  int factorial(int n); int main() { int n; scanf(\"%d\", \u0026n); int res = factorial(n); printf(\"%d\\n\", res); return 0; } int factorial(int n) { if (n  1) return 1; else return n * factorial(n - 1); }   MIPS代码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58  .data prompt1: .asciiz \"Enter the number\\n\" prompt2: .asciiz \"The factorial of n is:\\n\" .text # Print prompt1 li $v0, 4 la $a0, prompt1 syscall # Read integer li $v0, 5 syscall #Call factorial move $a0, $v0 jal factorial move $a1, $v0 # save return value to a # Print prompt2 li $v0, 4 la $a0, prompt2 syscall # Print result li $v0, 1 move $a0, $a1 syscall # Exit li $v0, 10 syscall ## Function int factorial(int n) factorial: ## YOUR CODE HERE addi $sp,$sp,-8 #adjust stack for 2 items sw $ra,4($sp) #save return address sw $a0,0($sp) #save the argument n slti $t0,$a0,1 #if n beq $t0,$zero,L1 #if equal,then jump L1 #above all,if n = 1,then jump L1 #if(n addi $v0,$zero,1 #return 1 addi $sp,$sp,8 #pop 2 items off stack jr $ra #return to caller #else L1: add $a0,$a0,-1 #argument :n - 1 jal factorial #call factorial with (n-1) lw $a0,0($sp) #restore argument n lw $ra,4($sp) #restore address addi $sp,$sp,8 #adjust stack pionter mul $v0,$a0,$v0 #return n * factorial(n-1) jr $ra #return to caller ## END OF YOUR CODE #jr $ra   快排  栈指针，存储$ra以及每次快排的区间i，j 函数调用，$ra与jal绑定用以递归回溯  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148  .data array: .space 4040 comma: .ascii \",\\0\" bracket2: .ascii \"]\\0\" bracket1: .ascii \"[\\0\" .text init: # 读入n的值 li $v0, 5 syscall move $s0, $v0 # 读入数组值的指针，$t0 addi $t0, $zero, 0 mul $s0, $s0, 4 input: beq $t0, $s0, input_end # 读入第i个值 li $v0, 5 syscall # 存至当前指针处 sw $v0, array($t0) addi $t0, $t0, 4 j input input_end: addi $s3, $zero, 0 addi $s4, $t0, -4 add $sp, $sp, -12 sw $s4, 0($sp) sw $s3, 4($sp) jal quick_sort li $v0, 4 la $a0, bracket1 syscall addi $t0, $zero, 0 output: #输出结果 li $v0, 1 lw $a0, array($t0) syscall add $t0, $t0, 4 beq $t0, $s0, outputend li $v0, 4 la $a0, comma syscall j output outputend: li $v0, 4 la $a0, bracket2 syscall addi $t0, $zero, 0 # 结束程序 li $v0, 10 syscall # 快排算法 quick_sort: # $s3为i，$s4为j lw $s4, 0($sp) lw $s3, 4($sp) sw $ra, 8($sp) bge $s3, $s4, L1 # 当i=j时，跳出循环 # else j getstandard li $v0, 4 addi $a0, $s5, 0 syscall L: #递归调用排序 addi $sp, $sp, -24 sw $ra, 20($sp) addi $s6, $s6, -4 sw $s3, 16($sp) sw $s6, 12($sp) sw $ra, 8($sp) addi $s6, $s6, 8 sw $s6, 4($sp) sw $s4, 0($sp) jal quick_sort jal quick_sort lw $ra, 8($sp) addi $sp, $sp, 12 jr $ra L1: addi $sp, $sp, 12 jr $ra getstandard: lw $t3, array($s3) #key addi $s6, $s3, 0 #i指针备份 addi $s7, $s4, 0 #j指针备份 while2: bge $s6, $s7, end2 while3: bge $s6, $s7, end3 lw $t2, array($s7) blt $t2, $t3, end3 addi $s7, $s7, -4 j while3 end3: bge $s6, $s7, while4 lw $t2, array($s7) sw $t2, array($s6) while4: bge $s6, $s7, end4 lw $t2, array($s6) bgt $t2, $t3, end4 addi $s6, $s6, 4 j while4 end4: bge $s6, $s7, while2 lw $t2, array($s6) sw $t2, array($s7) j while2 end2: sw $t3, array($s6) j L   区分lb，lh，lw，分别是加载字节，半字以及字\n 一个字节（byte）有8位（bits） 半字是半个字，16位，2个字节 一个字是32位，有4个字节  同理可以区分sb，sh，sw\n延迟槽\n汉诺塔 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79  .data s1: .ascii \"-\\0\" line: .ascii \"\\n\\0\" A: .ascii \"A\\0\" B: .ascii \"B\\0\" C: .ascii \"C\\0\" .text # 读入n li $v0, 5 syscall move $s0, $v0 la $s1, A la $s2, B la $s3, C jal hannuo li $v0, 10 syscall # 汉诺塔函数 hannuo: addi $sp, $sp, -20 sw $ra, 0($sp) sw $s0, 4($sp) #存储n sw $s1, 8($sp) #存储盘子A sw $s2, 12($sp)\t#存储盘子B sw $s3, 16($sp) #存储盘子C beq $s0, 1, move lw $s0, 4($sp) addi $s0, $s0, -1 lw $s1, 8($sp) lw $s2, 16($sp) lw $s3, 12($sp) jal hannuo lw $s1, 8($sp) lw $s3, 16($sp) jal move lw $s0, 4($sp) addi $s0, $s0, -1 lw $s1, 12($sp) lw $s2, 8($sp) lw $s3, 16($sp) jal hannuo # 跳转回上一次递归 lw $ra, 0($sp) addi $sp, $sp, 20 jr $ra move: li $v0, 4 move $a0, $s1 syscall li $v0, 4 la $a0, s1 syscall li $v0, 4 move $a0, $s3 syscall li $v0, 4 la $a0, line syscall lw $s0, 4($sp) beq $s0, 1, L1 jr $ra L1: lw $ra, 0($sp) addi $sp, $sp, 20 jr $ra   ","wordCount":"2634","inLanguage":"en","image":"http://appletea233.github.io/myblog_hogo/posts/blog/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0.assets/image-20211105005052389.png","datePublished":"2022-05-07T00:00:00Z","dateModified":"2022-05-08T00:00:00Z","author":[{"@type":"Person","name":"appletea"}],"mainEntityOfPage":{"@type":"WebPage","@id":"http://appletea233.github.io/myblog_hogo/posts/blog/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0/"},"publisher":{"@type":"Organization","name":"Appletea's Blog","logo":{"@type":"ImageObject","url":"http://appletea233.github.io/myblog_hogo/img/Q.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://appletea233.github.io/myblog_hogo accesskey=h title="Appletea's Blog (Alt + H)">Appletea's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://appletea233.github.io/myblog_hogo/search title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=http://appletea233.github.io/myblog_hogo/ title=🏠主页><span>🏠主页</span></a></li><li><a href=http://appletea233.github.io/myblog_hogo/posts title=📚文章><span>📚文章</span></a></li><li><a href=http://appletea233.github.io/myblog_hogo/archives/ title=⏱时间轴><span>⏱时间轴</span></a></li><li><a href=http://appletea233.github.io/myblog_hogo/tags title=🔖标签><span>🔖标签</span></a></li><li><a href=http://appletea233.github.io/myblog_hogo/about title=🙋🏻‍♂️关于><span>🙋🏻‍♂️关于</span></a></li><li><a href=http://appletea233.github.io/myblog_hogo/links title=🤝友链><span>🤝友链</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://appletea233.github.io/myblog_hogo>Home</a>&nbsp;»&nbsp;<a href=http://appletea233.github.io/myblog_hogo/posts/>📚文章</a>&nbsp;»&nbsp;<a href=http://appletea233.github.io/myblog_hogo/posts/blog/>Blog</a></div><h1 class=post-title>MIPS汇编基础</h1><div class=post-meta>创建:&nbsp;<span title="2022-05-07 00:00:00 +0000 UTC">2022-05-07</span>&nbsp;更新:&nbsp;2022-05-08&nbsp;字数:&nbsp;2634字&nbsp;时长:&nbsp;6分钟&nbsp;<br>作者:&nbsp;appletea&nbsp;标签:
<a href=http://appletea233.github.io/myblog_hogo/tags/mips>mips</a>
<a href=http://appletea233.github.io/myblog_hogo/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80>汇编语言</a>
本文总阅读量:&nbsp<span id=busuanzi_value_page_pv></span>次</p></div></header><figure class=entry-cover><img loading=lazy src=http://appletea233.github.io/%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0.assets/image-20211105005052389.png alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86 aria-label=基础知识>基础知识</a><ul><li><a href=#%e5%af%84%e5%ad%98%e5%99%a8 aria-label=寄存器>寄存器</a></li><li><a href=#%e5%9f%ba%e7%a1%80%e6%93%8d%e4%bd%9c aria-label=基础操作>基础操作</a></li><li><a href=#%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8 aria-label=系统调用>系统调用</a></li><li><a href=#gcd%e6%9c%80%e5%a4%a7%e5%85%ac%e7%ba%a6%e6%95%b0 aria-label=GCD最大公约数>GCD最大公约数</a></li><li><a href=#%e7%ba%a6%e7%91%9f%e5%a4%ab%e9%97%ae%e9%a2%98 aria-label=约瑟夫问题>约瑟夫问题</a></li><li><a href=#%e6%96%90%e6%b3%a2%e9%82%a3%e5%a5%91%e6%95%b0%e5%88%97 aria-label=斐波那契数列>斐波那契数列</a></li></ul></li><li><a href=#%e6%95%b0%e7%bb%84 aria-label=数组>数组</a><ul><li><a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e9%83%a8%e5%88%86%e9%80%86%e7%bd%ae aria-label=字符串部分逆置>字符串部分逆置</a></li><li><a href=#%e5%86%92%e6%b3%a1%e6%8e%92%e5%ba%8f aria-label=冒泡排序>冒泡排序</a></li></ul></li><li><a href=#%e9%80%92%e5%bd%92%e5%87%bd%e6%95%b0 aria-label=递归函数>递归函数</a><ul><li><a href=#%e9%80%92%e5%bd%92%e7%9a%84%e5%9f%ba%e6%9c%ac%e4%be%8b aria-label=递归的基本例>递归的基本例</a><ul><li><a href=#%e6%9c%89%e5%85%b3%e6%8c%87%e4%bb%a4 aria-label=有关指令>有关指令</a></li><li><a href=#c%e8%af%ad%e8%a8%80%e4%bb%a3%e7%a0%81 aria-label=C语言代码>C语言代码</a></li><li><a href=#mips%e4%bb%a3%e7%a0%81 aria-label=MIPS代码>MIPS代码</a></li></ul></li><li><a href=#%e5%bf%ab%e6%8e%92 aria-label=快排>快排</a></li><li><a href=#%e6%b1%89%e8%af%ba%e5%a1%94 aria-label=汉诺塔>汉诺塔</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const e=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${e}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=基础知识>基础知识<a hidden class=anchor aria-hidden=true href=#基础知识>#</a></h2><h3 id=寄存器>寄存器<a hidden class=anchor aria-hidden=true href=#寄存器>#</a></h3><p><img loading=lazy src=../%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0.assets/image-20211105005052389.png alt=image-20211105005052389></p><h3 id=基础操作>基础操作<a hidden class=anchor aria-hidden=true href=#基础操作>#</a></h3><p><img loading=lazy src=../%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0.assets/image-20211105005301779.png alt=image-20211105005301779></p><h3 id=系统调用>系统调用<a hidden class=anchor aria-hidden=true href=#系统调用>#</a></h3><p><img loading=lazy src=../%E6%B1%87%E7%BC%96%E7%AC%94%E8%AE%B0.assets/image-20211105162612933.png alt=image-20211105162612933></p><h3 id=gcd最大公约数>GCD最大公约数<a hidden class=anchor aria-hidden=true href=#gcd最大公约数>#</a></h3><ul><li>主要考察循环，使用$j$指令进行代码块间的跳转</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>.text
</span></span><span class=line><span class=cl>    # 读入数据
</span></span><span class=line><span class=cl>    li $v0 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    addi $t0, $v0, 0
</span></span><span class=line><span class=cl>    li $v0 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    addi $t1, $v0, 0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	# 循环求公约数
</span></span><span class=line><span class=cl>    while:
</span></span><span class=line><span class=cl>        beqz $t1, next
</span></span><span class=line><span class=cl>        div $t0, $t1
</span></span><span class=line><span class=cl>        move $t0, $t1
</span></span><span class=line><span class=cl>        mfhi $s0
</span></span><span class=line><span class=cl>        addi $t1, $s0, 0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    j while
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    next:
</span></span><span class=line><span class=cl>        addi $a0, $t0, 0
</span></span><span class=line><span class=cl>        li $v0, 1
</span></span><span class=line><span class=cl>        syscall 
</span></span><span class=line><span class=cl>        li $v0, 10
</span></span><span class=line><span class=cl>        syscall 
</span></span></code></pre></td></tr></table></div></div><h3 id=约瑟夫问题>约瑟夫问题<a hidden class=anchor aria-hidden=true href=#约瑟夫问题>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>    v: .word 1:110
</span></span><span class=line><span class=cl>.text
</span></span><span class=line><span class=cl>main:
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $s0, $v0 # 存储n
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $s1, $v0 # 存储m
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $s2, $v0 # 存储k
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    addi $t0, $s0, 0 # 当前人数alive
</span></span><span class=line><span class=cl>    addi $t1, $s2, 0 # 当前轮到的人index
</span></span><span class=line><span class=cl>    move $t2, $0 #当前轮次轮到过的人数num
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>while1:
</span></span><span class=line><span class=cl>    beq $t0, 0, out1
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    mul $t3, $t1, 4
</span></span><span class=line><span class=cl>    lw $t4, v($t3)
</span></span><span class=line><span class=cl>    add $t2, $t2, $t4
</span></span><span class=line><span class=cl>    bne $t2, $s1, L
</span></span><span class=line><span class=cl>        sw $0, v($t3)
</span></span><span class=line><span class=cl>        addi $t0, $t0, -1
</span></span><span class=line><span class=cl>        move $t2, $0
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        addi $a0, $t1, 1
</span></span><span class=line><span class=cl>        li $v0, 1
</span></span><span class=line><span class=cl>        syscall
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    L:
</span></span><span class=line><span class=cl>    addi $t1, $t1, 1
</span></span><span class=line><span class=cl>    bne $t1, $s0, L2
</span></span><span class=line><span class=cl>    move $t1, $0
</span></span><span class=line><span class=cl>    L2: 
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>j while1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>out1:
</span></span><span class=line><span class=cl>li $v0, 10
</span></span><span class=line><span class=cl>syscall
</span></span></code></pre></td></tr></table></div></div><h3 id=斐波那契数列>斐波那契数列<a hidden class=anchor aria-hidden=true href=#斐波那契数列>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>li $v0, 5
</span></span><span class=line><span class=cl>syscall
</span></span><span class=line><span class=cl>move $s0, $v0
</span></span><span class=line><span class=cl>li $s1, 1
</span></span><span class=line><span class=cl>li $s2, 1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>beq $s0, 1, one_or_two
</span></span><span class=line><span class=cl>beq $s0, 2, one_or_two
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>li $t0, 2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>for:
</span></span><span class=line><span class=cl>    bgt $t0, $s0, break1
</span></span><span class=line><span class=cl>    add $s2, $s2, $s1
</span></span><span class=line><span class=cl>    sub $s1, $s2, $s1
</span></span><span class=line><span class=cl>    addi $t0, $t0, 1
</span></span><span class=line><span class=cl>    j for
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>one_or_two:
</span></span><span class=line><span class=cl>    li $a0, 1
</span></span><span class=line><span class=cl>    li $v0, 1
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    li $v0, 10
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>break1:
</span></span><span class=line><span class=cl>     move $a0, $s1
</span></span><span class=line><span class=cl>     li $v0, 1
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     li $v0, 10
</span></span><span class=line><span class=cl>     syscall
</span></span></code></pre></td></tr></table></div></div><h2 id=数组>数组<a hidden class=anchor aria-hidden=true href=#数组>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>	Myarray:  .space 12
</span></span><span class=line><span class=cl>.text
</span></span></code></pre></td></tr></table></div></div><ol><li><p>.space就是在内存中开辟了一个相应大小的空间。就如示例中400就对应能存100个字（1个字四个字节，一个字节8位。内存是一个字一个字存储）</p></li><li><p>.word就是声明一个 word 类型的变量 name, 同时给其赋值为value</p></li><li><p>.byte并不是按字去申请空间，而是按照字节</p></li><li><p>.asciiz就是定义相应的字符串，便于后续的输出</p></li></ol><ul><li>.asciiz与.ascii的区别<ul><li>.ascii 声明使用 ASCII 字符声明一个文本字符串。字符串元素被预定义并且存放在内存中，其起始内存位置有便签 output指示。</li><li>.ascii和.asciz的区别是，.asciz会在字符串后自动添加<strong>结束符\0</strong>.</li></ul></li></ul><h3 id=字符串部分逆置>字符串部分逆置<a hidden class=anchor aria-hidden=true href=#字符串部分逆置>#</a></h3><ul><li>考察字符串的输入输出<ul><li>注意字符串在输入的时候有两个参数，第一个$ $a_0$存储字符串的首地址，第二个$$a_1$存储字符串的长度$+1$（因为字符串末尾需要有一个$NULL(&rsquo;\setminus0&rsquo;)$）</li></ul></li><li>考察对字符的操作，存取分别用$sb、lb$</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>	mystring: .space 1010
</span></span><span class=line><span class=cl>.text
</span></span><span class=line><span class=cl>    # 读入零散数据
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $t0, $v0 #读入n
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $t1, $v0 #读入x
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $t2, $v0 #读入y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	# 读入字符串
</span></span><span class=line><span class=cl>    li $v0, 8
</span></span><span class=line><span class=cl>    la $a0, mystring
</span></span><span class=line><span class=cl>    addi $a1, $t0, 1
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    # 输出x前的字符串
</span></span><span class=line><span class=cl>    li $t3, 0
</span></span><span class=line><span class=cl>    loop1:
</span></span><span class=line><span class=cl>        bge $t3, $t1, done1
</span></span><span class=line><span class=cl>        li $v0, 11
</span></span><span class=line><span class=cl>        lb $a0, mystring($t3)
</span></span><span class=line><span class=cl>        syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        addi $t3, $t3, 1
</span></span><span class=line><span class=cl>        j loop1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    done1:
</span></span><span class=line><span class=cl>        # 反转输出x~y的字符串
</span></span><span class=line><span class=cl>        addi $t3, $t2, 0 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    loop2:
</span></span><span class=line><span class=cl>        blt $t3, $t1, done2
</span></span><span class=line><span class=cl>        li $v0, 11
</span></span><span class=line><span class=cl>        lb $a0, mystring($t3)
</span></span><span class=line><span class=cl>        syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        addi $t3, $t3, -1
</span></span><span class=line><span class=cl>        j loop2
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    done2:
</span></span><span class=line><span class=cl>        # 输出y后的字符串
</span></span><span class=line><span class=cl>        addi $t3, $t2, 1 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    loop3:
</span></span><span class=line><span class=cl>        bge $t3, $t0, done3
</span></span><span class=line><span class=cl>        li $v0, 11
</span></span><span class=line><span class=cl>        lb $a0, mystring($t3)
</span></span><span class=line><span class=cl>        syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        addi $t3, $t3, 1
</span></span><span class=line><span class=cl>        j loop3
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    done3:
</span></span><span class=line><span class=cl>        li $v0, 10
</span></span><span class=line><span class=cl>        syscall
</span></span></code></pre></td></tr></table></div></div><h3 id=冒泡排序>冒泡排序<a hidden class=anchor aria-hidden=true href=#冒泡排序>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>    array: .word 0:101
</span></span><span class=line><span class=cl>.text
</span></span><span class=line><span class=cl>main:
</span></span><span class=line><span class=cl>    # 读入数据
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $s0, $v0
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    # 循环读入数组
</span></span><span class=line><span class=cl>    li $t0, 0
</span></span><span class=line><span class=cl>    for1:
</span></span><span class=line><span class=cl>        bge $t0, $s0, break1
</span></span><span class=line><span class=cl>        mul $t1, $t0, 4
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        li $v0, 5
</span></span><span class=line><span class=cl>        syscall
</span></span><span class=line><span class=cl>        sw $v0, array($t1)
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        addi $t0, $t0, 1
</span></span><span class=line><span class=cl>     j for1
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     break1:
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     # 排序
</span></span><span class=line><span class=cl>     li $t0, 0 #i指针
</span></span><span class=line><span class=cl>     for2:
</span></span><span class=line><span class=cl>         bge $t0, $s0, break2
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         li $t1, 0 #j指针
</span></span><span class=line><span class=cl>         addi $t2, $s0, -1
</span></span><span class=line><span class=cl>         sub $t2, $t2, $t0
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         for3:
</span></span><span class=line><span class=cl>             bge $t1, $t2, break3
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>             # j与j+1的地址
</span></span><span class=line><span class=cl>             mul $t4, $t1, 4
</span></span><span class=line><span class=cl>             addi $t5, $t4, 4
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>             lw $s4, array($t4)
</span></span><span class=line><span class=cl>             lw $s5, array($t5)
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>             ble $s4, $s5, L
</span></span><span class=line><span class=cl>             sw $s5, array($t4)
</span></span><span class=line><span class=cl>             sw $s4, array($t5)
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>             L: 
</span></span><span class=line><span class=cl>             
</span></span><span class=line><span class=cl>         addi $t1, $t1, 1    
</span></span><span class=line><span class=cl>         j for3
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      break3:
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      addi $t0, $t0, 1
</span></span><span class=line><span class=cl>      j for2
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      break2:
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>    li $t0, 0
</span></span><span class=line><span class=cl>    for4:
</span></span><span class=line><span class=cl>        bge $t0, $s0, break4
</span></span><span class=line><span class=cl>        mul $t1, $t0, 4
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        lw $a0, array($t1)
</span></span><span class=line><span class=cl>        li $v0, 1
</span></span><span class=line><span class=cl>        syscall
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        addi $t0, $t0, 1
</span></span><span class=line><span class=cl>    j for4
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    break4:
</span></span><span class=line><span class=cl>    li $v0, 10
</span></span><span class=line><span class=cl>    syscall
</span></span></code></pre></td></tr></table></div></div><ol><li>数组的应用</li><li>函数的调用以及地址返回</li><li>在mips中使用递归函数（用栈指针模拟$sp）</li></ol><h2 id=递归函数>递归函数<a hidden class=anchor aria-hidden=true href=#递归函数>#</a></h2><h3 id=递归的基本例>递归的基本例<a hidden class=anchor aria-hidden=true href=#递归的基本例>#</a></h3><h4 id=有关指令>有关指令<a hidden class=anchor aria-hidden=true href=#有关指令>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl> jal  function   #set $ra to Program Counter(PC),then jump to statement at target addres
</span></span></code></pre></td></tr></table></div></div><h4 id=c语言代码>C语言代码<a hidden class=anchor aria-hidden=true href=#c语言代码>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>factorial</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=n>factorial</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>res</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>factorial</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>)</span> <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=k>return</span> <span class=n>n</span> <span class=o>*</span> <span class=n>factorial</span><span class=p>(</span><span class=n>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=mips代码>MIPS代码<a hidden class=anchor aria-hidden=true href=#mips代码>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>    prompt1: .asciiz &#34;Enter the number\n&#34;
</span></span><span class=line><span class=cl>    prompt2: .asciiz &#34;The factorial of n is:\n&#34;
</span></span><span class=line><span class=cl>.text
</span></span><span class=line><span class=cl>    # Print prompt1
</span></span><span class=line><span class=cl>    li $v0, 4
</span></span><span class=line><span class=cl>    la $a0, prompt1
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    # Read integer
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    #Call factorial
</span></span><span class=line><span class=cl>    move $a0, $v0
</span></span><span class=line><span class=cl>    jal factorial
</span></span><span class=line><span class=cl>    move $a1, $v0
</span></span><span class=line><span class=cl>    # save return value to a 
</span></span><span class=line><span class=cl>    # Print prompt2
</span></span><span class=line><span class=cl>    li $v0, 4
</span></span><span class=line><span class=cl>    la $a0, prompt2
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    # Print result
</span></span><span class=line><span class=cl>    li $v0, 1
</span></span><span class=line><span class=cl>    move $a0, $a1
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    # Exit
</span></span><span class=line><span class=cl>    li $v0, 10
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    ## Function int factorial(int n)
</span></span><span class=line><span class=cl>    factorial:
</span></span><span class=line><span class=cl>    ## YOUR CODE HERE
</span></span><span class=line><span class=cl>    addi $sp,$sp,-8            #adjust stack for 2 items
</span></span><span class=line><span class=cl>    sw   $ra,4($sp)            #save return address
</span></span><span class=line><span class=cl>    sw   $a0,0($sp)            #save the argument n
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>    slti $t0,$a0,1             #if n &lt; 1,then set $t0 as 1
</span></span><span class=line><span class=cl>    beq  $t0,$zero,L1          #if equal,then jump L1
</span></span><span class=line><span class=cl>                                    #above all,if n &gt;= 1,then jump L1
</span></span><span class=line><span class=cl>    #if(n &lt; 1)
</span></span><span class=line><span class=cl>    addi $v0,$zero,1            #return 1
</span></span><span class=line><span class=cl>    addi $sp,$sp,8              #pop 2 items off stack
</span></span><span class=line><span class=cl>    jr   $ra                    #return to caller
</span></span><span class=line><span class=cl>    #else
</span></span><span class=line><span class=cl>    L1:
</span></span><span class=line><span class=cl>    add $a0,$a0,-1          #argument :n - 1
</span></span><span class=line><span class=cl>    jal factorial           #call factorial with (n-1)
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    lw   $a0,0($sp)          #restore argument n
</span></span><span class=line><span class=cl>    lw   $ra,4($sp)          #restore address
</span></span><span class=line><span class=cl>    addi $sp,$sp,8           #adjust stack pionter
</span></span><span class=line><span class=cl>    mul  $v0,$a0,$v0         #return n * factorial(n-1)
</span></span><span class=line><span class=cl>    jr   $ra                 #return to caller
</span></span><span class=line><span class=cl>    ## END OF YOUR CODE
</span></span><span class=line><span class=cl>    #jr $ra 
</span></span></code></pre></td></tr></table></div></div><h3 id=快排>快排<a hidden class=anchor aria-hidden=true href=#快排>#</a></h3><ol><li>栈指针，存储$ra以及每次快排的区间i，j</li><li>函数调用，$ra与jal绑定用以递归回溯</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>    array:  .space 4040
</span></span><span class=line><span class=cl>    comma:  .ascii &#34;,\0&#34;
</span></span><span class=line><span class=cl>    bracket2: .ascii &#34;]\0&#34; 
</span></span><span class=line><span class=cl>    bracket1: .ascii &#34;[\0&#34;
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>.text
</span></span><span class=line><span class=cl>init:
</span></span><span class=line><span class=cl># 读入n的值
</span></span><span class=line><span class=cl>     li $v0, 5
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     move $s0, $v0
</span></span><span class=line><span class=cl>     # 读入数组值的指针，$t0
</span></span><span class=line><span class=cl>     addi $t0, $zero, 0
</span></span><span class=line><span class=cl>     mul $s0, $s0, 4
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     input:
</span></span><span class=line><span class=cl>     beq $t0, $s0, input_end
</span></span><span class=line><span class=cl>     # 读入第i个值
</span></span><span class=line><span class=cl>     li $v0, 5
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     # 存至当前指针处
</span></span><span class=line><span class=cl>     sw $v0, array($t0)
</span></span><span class=line><span class=cl>     	addi $t0, $t0, 4
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     j input
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     input_end:
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     addi $s3, $zero, 0
</span></span><span class=line><span class=cl>     addi $s4, $t0, -4
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     add $sp, $sp, -12
</span></span><span class=line><span class=cl>     sw $s4, 0($sp)
</span></span><span class=line><span class=cl>     sw $s3, 4($sp)
</span></span><span class=line><span class=cl>     jal quick_sort
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     li $v0, 4
</span></span><span class=line><span class=cl>     la $a0, bracket1
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     addi $t0, $zero, 0
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     output: #输出结果
</span></span><span class=line><span class=cl>     li $v0, 1
</span></span><span class=line><span class=cl>     lw $a0, array($t0)
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     add $t0, $t0, 4
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     beq $t0, $s0, outputend
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     li $v0, 4
</span></span><span class=line><span class=cl>     la $a0, comma
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     j output
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     outputend:
</span></span><span class=line><span class=cl>     li $v0, 4
</span></span><span class=line><span class=cl>     la $a0, bracket2
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     addi $t0, $zero, 0
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     # 结束程序
</span></span><span class=line><span class=cl>     li $v0, 10
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     # 快排算法
</span></span><span class=line><span class=cl>quick_sort:
</span></span><span class=line><span class=cl>     # $s3为i，$s4为j
</span></span><span class=line><span class=cl>     lw $s4, 0($sp)
</span></span><span class=line><span class=cl>     lw $s3, 4($sp)
</span></span><span class=line><span class=cl>     sw $ra, 8($sp)
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     bge $s3, $s4, L1 # 当i&gt;=j时，跳出循环
</span></span><span class=line><span class=cl>     # else
</span></span><span class=line><span class=cl>     j getstandard
</span></span><span class=line><span class=cl>     li $v0, 4
</span></span><span class=line><span class=cl>     addi $a0, $s5, 0
</span></span><span class=line><span class=cl>     syscall
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     L: #递归调用排序 
</span></span><span class=line><span class=cl>     addi $sp, $sp, -24
</span></span><span class=line><span class=cl>     sw $ra, 20($sp)
</span></span><span class=line><span class=cl>     addi $s6, $s6, -4
</span></span><span class=line><span class=cl>     sw $s3, 16($sp)
</span></span><span class=line><span class=cl>     sw $s6, 12($sp)
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     sw $ra, 8($sp)
</span></span><span class=line><span class=cl>     addi $s6, $s6, 8
</span></span><span class=line><span class=cl>     sw $s6, 4($sp)
</span></span><span class=line><span class=cl>     sw $s4, 0($sp)
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     jal quick_sort
</span></span><span class=line><span class=cl>     jal quick_sort
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     lw $ra, 8($sp)
</span></span><span class=line><span class=cl>     addi $sp, $sp, 12
</span></span><span class=line><span class=cl>     jr $ra
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     L1:
</span></span><span class=line><span class=cl>     addi $sp, $sp, 12
</span></span><span class=line><span class=cl>     jr $ra
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>getstandard:
</span></span><span class=line><span class=cl>     lw $t3, array($s3)   #key
</span></span><span class=line><span class=cl>     addi $s6, $s3, 0 #i指针备份
</span></span><span class=line><span class=cl>     addi $s7, $s4, 0 #j指针备份
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>     while2:
</span></span><span class=line><span class=cl>     bge $s6, $s7, end2
</span></span><span class=line><span class=cl>         while3:
</span></span><span class=line><span class=cl>         bge $s6, $s7, end3
</span></span><span class=line><span class=cl>         lw $t2, array($s7)
</span></span><span class=line><span class=cl>         blt $t2, $t3, end3
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         addi $s7, $s7, -4
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         j while3
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         end3:
</span></span><span class=line><span class=cl>         bge $s6, $s7, while4
</span></span><span class=line><span class=cl>             lw $t2, array($s7)
</span></span><span class=line><span class=cl>             sw $t2, array($s6)
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         while4:
</span></span><span class=line><span class=cl>         bge $s6, $s7, end4
</span></span><span class=line><span class=cl>         lw $t2, array($s6)
</span></span><span class=line><span class=cl>         bgt $t2, $t3, end4
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         addi $s6, $s6, 4
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         j while4
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>         end4:
</span></span><span class=line><span class=cl>         bge $s6, $s7, while2
</span></span><span class=line><span class=cl>             lw $t2, array($s6)
</span></span><span class=line><span class=cl>             sw $t2, array($s7)
</span></span><span class=line><span class=cl>    j while2
</span></span><span class=line><span class=cl>     
</span></span><span class=line><span class=cl>    end2:
</span></span><span class=line><span class=cl>    sw $t3, array($s6)
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    j L
</span></span></code></pre></td></tr></table></div></div><p>区分lb，lh，lw，分别是加载字节，半字以及字</p><ul><li>一个字节（byte）有8位（bits）</li><li>半字是半个字，16位，2个字节</li><li>一个字是32位，有4个字节</li></ul><p>同理可以区分sb，sh，sw</p><p>延迟槽</p><h3 id=汉诺塔>汉诺塔<a hidden class=anchor aria-hidden=true href=#汉诺塔>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>	s1: .ascii &#34;-&gt;\0&#34;
</span></span><span class=line><span class=cl>	line: .ascii &#34;\n\0&#34;
</span></span><span class=line><span class=cl>	A: .ascii &#34;A\0&#34;
</span></span><span class=line><span class=cl>	B: .ascii &#34;B\0&#34;
</span></span><span class=line><span class=cl>	C: .ascii &#34;C\0&#34;
</span></span><span class=line><span class=cl>.text
</span></span><span class=line><span class=cl>    # 读入n
</span></span><span class=line><span class=cl>    li $v0, 5
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    move $s0, $v0
</span></span><span class=line><span class=cl>    la $s1, A
</span></span><span class=line><span class=cl>    la $s2, B
</span></span><span class=line><span class=cl>    la $s3, C
</span></span><span class=line><span class=cl>    jal hannuo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    li $v0, 10
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 汉诺塔函数
</span></span><span class=line><span class=cl>hannuo:
</span></span><span class=line><span class=cl>    addi $sp, $sp, -20
</span></span><span class=line><span class=cl>    sw $ra, 0($sp)
</span></span><span class=line><span class=cl>    sw $s0, 4($sp) #存储n
</span></span><span class=line><span class=cl>    sw $s1, 8($sp) #存储盘子A
</span></span><span class=line><span class=cl>    sw $s2, 12($sp)	#存储盘子B
</span></span><span class=line><span class=cl>    sw $s3, 16($sp) #存储盘子C
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    beq $s0, 1, move
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    lw $s0, 4($sp)
</span></span><span class=line><span class=cl>    addi $s0, $s0, -1
</span></span><span class=line><span class=cl>    lw $s1, 8($sp)
</span></span><span class=line><span class=cl>    lw $s2, 16($sp)
</span></span><span class=line><span class=cl>    lw $s3, 12($sp)
</span></span><span class=line><span class=cl>    jal hannuo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    lw $s1, 8($sp)
</span></span><span class=line><span class=cl>    lw $s3, 16($sp)
</span></span><span class=line><span class=cl>    jal move
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    lw $s0, 4($sp)
</span></span><span class=line><span class=cl>    addi $s0, $s0, -1
</span></span><span class=line><span class=cl>    lw $s1, 12($sp)
</span></span><span class=line><span class=cl>    lw $s2, 8($sp)
</span></span><span class=line><span class=cl>    lw $s3, 16($sp)
</span></span><span class=line><span class=cl>    jal hannuo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    # 跳转回上一次递归
</span></span><span class=line><span class=cl>    lw $ra, 0($sp)
</span></span><span class=line><span class=cl>    addi $sp, $sp, 20
</span></span><span class=line><span class=cl>    jr $ra
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>move:
</span></span><span class=line><span class=cl>    li $v0, 4
</span></span><span class=line><span class=cl>    move $a0, $s1
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    li $v0, 4
</span></span><span class=line><span class=cl>    la $a0, s1
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    li $v0, 4
</span></span><span class=line><span class=cl>    move $a0, $s3
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>    li $v0, 4
</span></span><span class=line><span class=cl>    la $a0, line
</span></span><span class=line><span class=cl>    syscall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    lw $s0, 4($sp)
</span></span><span class=line><span class=cl>    beq $s0, 1, L1
</span></span><span class=line><span class=cl>    jr $ra
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L1:
</span></span><span class=line><span class=cl>    lw $ra, 0($sp)
</span></span><span class=line><span class=cl>    addi $sp, $sp, 20
</span></span><span class=line><span class=cl>    jr $ra
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://appletea233.github.io/myblog_hogo/tags/mips/>mips</a></li><li><a href=http://appletea233.github.io/myblog_hogo/tags/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80/>汇编语言</a></li></ul><nav class=paginav><a class=prev href=http://appletea233.github.io/myblog_hogo/posts/blog/%E6%96%87%E6%A1%A3/><span class=title>« Prev Page</span><br><span>BUAA操作系统lab3笔记</span></a>
<a class=next href=http://appletea233.github.io/myblog_hogo/posts/blog/my-first-post/><span class=title>Next Page »</span><br><span>My First Post</span></a></nav></footer><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>💬评论</span><hr></div><div id=tcomment></div><script src=https://cdn.jsdelivr.net/npm/twikoo@1.5.9/dist/twikoo.all.min.js></script>
<script>twikoo.init({envId:"https://twikoo-12c9q2x4o-1530457905-qqcom.vercel.app/",el:"#tcomment",lang:"zh-CN",path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><span>&copy; 2022 <a href=http://appletea233.github.io/myblog_hogo>Appletea's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>